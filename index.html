<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>æƒ³æ³•èˆ‡æƒ…ç·’è¨˜éŒ„ç°¿</title>
  <link rel="manifest" href="manifest.json" />
  <meta name="theme-color" content="#f3f4f6" />
  <style>
    body { font-family: system-ui, -apple-system, BlinkMacSystemFont, sans-serif; margin: 0; background: #f3f4f6; }
    .container { max-width: 480px; margin: auto; padding: 1rem; }
    textarea { width: 100%; border-radius: 10px; border: 1px solid #ccc; padding: 0.7rem; resize: none; }
    button { width: 100%; padding: 0.7rem; border-radius: 10px; border: none; background: #111; color: white; margin-top: 0.6rem; }
    .entry { background: white; padding: 0.7rem; border-radius: 10px; margin-bottom: 0.6rem; }
    h2 { margin-bottom: 0.2rem; }
    .hint { font-size: 0.8rem; color: #777; margin-bottom: 0.8rem; }
  </style>
</head>
<body>
  <div id="root" class="container"></div>

  <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>

  <script>
    const { useState, useEffect } = React;

    function App() {
      const today = new Date().toISOString().slice(0,10);
      const [date, setDate] = useState(today);
      const [text, setText] = useState("");
      const [data, setData] = useState(() => {
        try {
          return JSON.parse(localStorage.getItem("quiet-diary")) || {};
        } catch {
          return {};
        }
      });

      useEffect(() => {
        localStorage.setItem("quiet-diary", JSON.stringify(data));
      }, [data]);

      const add = () => {
        if (!text.trim()) return;
        const entry = { id: Date.now(), text };
        setData({ ...data, [date]: data[date] ? [...data[date], entry] : [entry] });
        setText("");
      };

      return React.createElement(
        "div",
        null,
        React.createElement("h2", null, "ðŸ““ æƒ³æ³•èˆ‡æƒ…ç·’è¨˜éŒ„ç°¿"),
        React.createElement("div", { className: "hint" }, "é€™è£¡ä¸éœ€è¦æ•´ç†ï¼Œåªéœ€è¦ç•™ä¸‹"),
        React.createElement("input", {
          type: "date",
          value: date,
          onChange: e => setDate(e.target.value),
          style: { width: "100%", padding: "0.5rem", borderRadius: "8px", border: "1px solid #ccc", marginBottom: "0.6rem" }
        }),
        React.createElement("textarea", {
          rows: 4,
          value: text,
          onChange: e => setText(e.target.value),
          placeholder: "æŠŠå‰›å‰›é‚£å€‹æ„Ÿè¦ºå¯«ä¸‹ä¾†â€¦"
        }),
        React.createElement("button", { onClick: add }, "ç•™ä¸‹"),
        (data[date] || []).map(e =>
          React.createElement("div", { key: e.id, className: "entry" }, e.text)
        )
      );
    }

    ReactDOM.render(React.createElement(App), document.getElementById("root"));
  </script>
</body>
</html>
